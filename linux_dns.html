
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=10.0,user-scalable=1">

<style src="./css/github.css"></style>

<h1>Linux下搭建DNS服务器</h1>
<h2>一、准备工作</h2>
<h3>1.将虚拟机网络设置为桥接</h3>
<h3>2.配置网卡</h3>
<pre><code>vim /etc/sysconfig/network-scripts/ifcfg-eth0
</code></pre>
<p>修改如下内容
<code>BOOTPROTO=static
IPADDR=192.168.xxx.1
NETMASK=255.255.255.0</code>
重启网络
<code>service network restart</code></p>
<h2>二、安装软件包</h2>
<h3>1.虚拟机挂载光驱，镜像文件选择RHEL 6.6.iso</h3>
<h3>2.安装bind</h3>
<pre><code>cd /media/RHEL-6.6\ Server.i386/Packages
rpm -ivh bind-9.8.2-0.30.rc1.el6.i686.rpm
</code></pre>
<h2>三、修改配置文件</h2>
<h3>1.修改DNS主配置文件</h3>
<pre><code>vim /etc/named.conf
</code></pre>
<p>修改如下内容
<code>listen on port 53 { any; }
allow-query { any; }</code></p>
<h3>2.修改named.rfc1912.zones文件</h3>
<pre><code>vim /etc/named.rfc1912.zones
</code></pre>
<p>编辑如下</p>
<p><img alt="named.rfc1912.zones" src="https://i.loli.net/2019/08/14/4OgEC5IKfFhuRJY.png" />)</p>
<h3>3.增加并修改正向解析文件和反向解析文件</h3>
<p>修改zone配置文件正向解析
<code>cd /var/named
cp -p named.localhost xxx.com.zone
vim xxx.com.zone</code>
编辑如下</p>
<p><img alt="xxx.com.zone" src="https://i.loli.net/2019/08/14/ZDBEWTpCF51JmOP.jpg" /></p>
<p>修改zone配置文件反向解析
<code>cp -p named.localhost 192.168.xxx.zone
vim 192.168.xxx</code>
编辑如下</p>
<p><img alt="192.168.xxx" src="https://i.loli.net/2019/08/14/7dwKzhXgvJWq51L.jpg" /></p>
<h2>四、安全策略</h2>
<h3>1.更改selinux设置</h3>
<pre><code>setenforce 0
</code></pre>
<h3>2.关闭防火墙</h3>
<pre><code>service iptables stop
</code></pre>
<p>或者使用<code>setup</code>命令,选择<code>Firewall configuration</code>下的<code>Security Level</code>并设置为<code>Disabled</code>，然后保存退出</p>
<h2>五、调试检查</h2>
<h3>1.重启DNS和网络服务</h3>
<pre><code>service network restart
service named restart
</code></pre>
<h3>2.测试DNS</h3>
<pre><code>nslookup
</code></pre>